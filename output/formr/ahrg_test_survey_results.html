<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>AHRG Test survey results</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="ahrg_test_survey_results_files/libs/clipboard/clipboard.min.js"></script>
<script src="ahrg_test_survey_results_files/libs/quarto-html/quarto.js"></script>
<script src="ahrg_test_survey_results_files/libs/quarto-html/popper.min.js"></script>
<script src="ahrg_test_survey_results_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ahrg_test_survey_results_files/libs/quarto-html/anchor.min.js"></script>
<link href="ahrg_test_survey_results_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ahrg_test_survey_results_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ahrg_test_survey_results_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ahrg_test_survey_results_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ahrg_test_survey_results_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="ahrg_test_survey_results_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="ahrg_test_survey_results_files/libs/tabwid-1.1.3/tabwid.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="ahrg_test_survey_results.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">AHRG Test survey results</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="some-initial-figure" class="level2">
<h2 class="anchored" data-anchor-id="some-initial-figure">Some initial figure</h2>
</section>
<section id="descriptive-data" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="descriptive-data">Descriptive data</h2>
<p>When you click the <strong>Render</strong> button a document will be generated that includes both content and the output of embedded code. You can embed code like this:</p>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-8c4ac5ca{}.cl-8c40e17c{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8c40e1cc{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8c44a4ce{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:1pt;padding-top:1pt;padding-left:1pt;padding-right:1pt;line-height: 1;background-color:transparent;}.cl-8c44a4d8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:1pt;padding-top:1pt;padding-left:1pt;padding-right:1pt;line-height: 1;background-color:transparent;}.cl-8c44bafe{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb12{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb1c{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb1d{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb26{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb27{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb28{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb3a{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb3b{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb44{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb45{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb46{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb4e{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb58{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb59{width:2.103in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c44bb62{width:1.772in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-8c4ac5ca"><thead><tr style="overflow-wrap:break-word;"><th class="cl-8c44bafe"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;</span></p></th><th class="cl-8c44bb12"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">Overall</span><br><span class="cl-8c40e17c">(N=13)</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb1c"><p class="cl-8c44a4ce"><span class="cl-8c40e1cc">Plan to relocate?</span></p></td><td class="cl-8c44bb1d"><p class="cl-8c44a4d8"><span class="cl-8c40e17c"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Yes</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">9 (69.2%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;No</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">4 (30.8%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb28"><p class="cl-8c44a4ce"><span class="cl-8c40e1cc">Monthly costs</span></p></td><td class="cl-8c44bb3a"><p class="cl-8c44a4d8"><span class="cl-8c40e17c"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Mean (SD)</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">9000 (7000)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb3b"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Median [Min, Max]</span></p></td><td class="cl-8c44bb44"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">8000 [0, 30000]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb28"><p class="cl-8c44a4ce"><span class="cl-8c40e1cc">Monthly household income</span></p></td><td class="cl-8c44bb3a"><p class="cl-8c44a4d8"><span class="cl-8c40e17c"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Mean (SD)</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">50000 (40000)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb3b"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Median [Min, Max]</span></p></td><td class="cl-8c44bb44"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">40000 [5000, 100000]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Missing</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">3 (23.1%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb45"><p class="cl-8c44a4ce"><span class="cl-8c40e1cc">Own house</span></p></td><td class="cl-8c44bb46"><p class="cl-8c44a4d8"><span class="cl-8c40e17c"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Hyresrätt</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">4 (30.8%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Bostadsrätt</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">5 (38.5%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb4e"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Äganderätt</span></p></td><td class="cl-8c44bb58"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">4 (30.8%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb1c"><p class="cl-8c44a4ce"><span class="cl-8c40e1cc">Kind of house</span></p></td><td class="cl-8c44bb1d"><p class="cl-8c44a4d8"><span class="cl-8c40e17c"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Småhus</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">6 (46.2%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Flerbostadshus</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">6 (46.2%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb4e"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Övriga hus</span></p></td><td class="cl-8c44bb58"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">1 (7.7%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Specialbostäder</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">0 (0%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb1c"><p class="cl-8c44a4ce"><span class="cl-8c40e1cc">Kind of device</span></p></td><td class="cl-8c44bb1d"><p class="cl-8c44a4d8"><span class="cl-8c40e17c"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Mobile</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">5 (38.5%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb26"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Desktop</span></p></td><td class="cl-8c44bb27"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">8 (61.5%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8c44bb59"><p class="cl-8c44a4ce"><span class="cl-8c40e17c">&nbsp;&nbsp;Tablet</span></p></td><td class="cl-8c44bb62"><p class="cl-8c44a4d8"><span class="cl-8c40e17c">0 (0%)</span></p></td></tr></tbody></table></div>
</div>
</div>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-margin" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ahrg_test_survey_results_files/figure-html/fig-margin-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Gender</figcaption>
</figure>
</div>
</div></div></div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Do you have any comments on the user experience? Please share any comments or difficulties you had in taking the survey!</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">The font could be (much) bigger. Also a couple of first questions I found not possible to answer, so would have altogether quite the survey after the first one, where could not choose "maybe" for relocation plans. Is everyone suppose to be so sure? Also in the next question it was only house and apartment. I think radhus is missing...? Because later I think it was in one of the drop down menus.</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">There is a mix of English and Swedish in a few places, e g "This includes avgift." The 9 housing alternatives made me frustrated because they were so similar. I think that if the pictures were different and showed (could be in a simple graphic) the different distances/parking/fees, it would be esasier.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Hmmm... Frustrating to only have two choices :-) I said I will move within 5 years. "You" forced me into choosing between apartments (not house). I want to move to reduce my costs, be close to shops and transportation. I don´t care about parking because I will get rid of my car when I move. So... If that was my "opinion" when I started the survey - afterwards I am not sure that that was the opinion I expressed...My point is, if we have cost, shops, transportation and parking as the attributes and only three of them are to some extent important to me, I had to weigh in factors that don´t reflect my opinion. Thanks for letting me test this, a lot of food for thought! / Marianne Granbom</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">I have done this type of survey before, so I know the design, but it was difficult to understand how to interpret the information about the environments before the questions were asked. The distances to transportation are relevant, but it was difficult to imagine that it is 15km to green areas in Sweden or will the survey be conducted in big cities. There is no back arrow and I couldn't check what green areas mean.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">Nice with pictures! Maybe add blue areas to green areas since beaches are included. Choices would feel more accurate with adjusted distances. The arrow below each choice set could be a button - "Go to next choice set".</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">Some response choices are only in Swedish, so please consider add an English translation (even if it's not 100% accurate). as to the picture choice questions, it took some time to identify the differences. Would it be ok if the differences are highlighted in the descriptions?</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">Q about approx monthly cost - did you mean costs for the total household? Q about gender- better to have a check box with a third alternative. Do not use “different”. Better with “other” or “non of the above”. Q about current situation - I couldn’t answer correctly because a have two apartments one rental and one owned Distance to green - first alternate 5km is too far from my perspective Unrealistic housing alternative showed up with both 10km to green and shop. Is there such circumstances at any place in Sweden? Some alternatives were obvious- for example shorter distances to all variables and less expensive.</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>